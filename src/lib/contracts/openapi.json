{
  "openapi": "3.0.3",
  "info": {
    "title": "Attra API",
    "description": "Attribution Infrastructure for Service Businesses",
    "version": "1.0.0",
    "contact": {
      "name": "Attra Support",
      "url": "https://attra.io"
    }
  },
  "components": {
    "securitySchemes": {
      "bearerAuth": {
        "type": "http",
        "scheme": "bearer",
        "bearerFormat": "JWT"
      },
      "apiKeyAuth": {
        "type": "http",
        "scheme": "bearer",
        "description": "API key in Bearer token format"
      }
    },
    "schemas": {}
  },
  "paths": {
    "/q/{id}": {
      "get": {
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/schema": {
      "get": {
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/public/leads/submit": {
      "post": {
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/tenants": {
      "get": {
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      },
      "post": {
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/tenants/{id}": {
      "get": {
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      },
      "put": {
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      },
      "delete": {
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/schema/{table}": {
      "get": {
        "tags": [
          "internal"
        ],
        "description": "Get schema information for a table",
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "table",
            "required": true,
            "description": "Table name"
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "table": {
                      "type": "string"
                    },
                    "columns": {
                      "type": "array"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "details": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/internal/templates": {
      "get": {
        "tags": [
          "Email Templates"
        ],
        "description": "List all email templates",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      },
      "post": {
        "tags": [
          "Email Templates"
        ],
        "description": "Create new email template",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name",
                  "subject",
                  "body_html"
                ],
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Template name (e.g., \"Welcome Email\")"
                  },
                  "subject": {
                    "type": "string",
                    "description": "Email subject line with variables like {{companyName}}"
                  },
                  "body_html": {
                    "type": "string",
                    "description": "HTML email body with variables like {{firstName}}"
                  },
                  "body_text": {
                    "type": "string",
                    "description": "Plain text email body (optional)"
                  },
                  "category": {
                    "type": "string",
                    "description": "Template category (e.g., \"welcome\", \"follow_up\")"
                  },
                  "variables": {
                    "type": "object",
                    "description": "Template variables for documentation (optional)"
                  }
                }
              }
            }
          },
          "required": true
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/templates/{id}": {
      "get": {
        "tags": [
          "Email Templates"
        ],
        "description": "Get email template by ID",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      },
      "put": {
        "tags": [
          "Email Templates"
        ],
        "description": "Update email template",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      },
      "delete": {
        "tags": [
          "Email Templates"
        ],
        "description": "Delete email template",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/emails/send": {
      "post": {
        "tags": [
          "Email Templates"
        ],
        "description": "Send email using template (queues job for delivery)",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "template_id",
                  "to"
                ],
                "properties": {
                  "template_id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Template ID"
                  },
                  "contact_id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Contact ID (optional)"
                  },
                  "to": {
                    "type": "string",
                    "format": "email",
                    "description": "Recipient email address"
                  },
                  "variables": {
                    "type": "object",
                    "description": "Variables to replace in template (e.g., {firstName: \"John\"})"
                  }
                }
              }
            }
          },
          "required": true
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/emails/logs": {
      "get": {
        "tags": [
          "Email Templates"
        ],
        "description": "Get email delivery logs",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/webhooks": {
      "get": {
        "tags": [
          "Webhooks"
        ],
        "description": "List all webhooks",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      },
      "post": {
        "tags": [
          "Webhooks"
        ],
        "description": "Create new webhook (auto-generates signing secret)",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name",
                  "url",
                  "events"
                ],
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Webhook name"
                  },
                  "url": {
                    "type": "string",
                    "format": "uri",
                    "description": "Webhook endpoint URL"
                  },
                  "events": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "Event types (e.g., [\"qr_scan\", \"contact_created\"])"
                  },
                  "is_active": {
                    "type": "boolean",
                    "description": "Enable/disable webhook",
                    "default": true
                  }
                }
              }
            }
          },
          "required": true
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/webhooks/{id}": {
      "get": {
        "tags": [
          "Webhooks"
        ],
        "description": "Get webhook by ID",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      },
      "put": {
        "tags": [
          "Webhooks"
        ],
        "description": "Update webhook configuration",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Webhook name"
                  },
                  "url": {
                    "type": "string",
                    "format": "uri",
                    "description": "Webhook endpoint URL"
                  },
                  "events": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "Event types to subscribe to"
                  },
                  "is_active": {
                    "type": "boolean",
                    "description": "Enable/disable webhook"
                  }
                }
              }
            }
          }
        },
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "in": "path",
            "name": "id",
            "required": true,
            "description": "Webhook ID"
          }
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      },
      "delete": {
        "tags": [
          "Webhooks"
        ],
        "description": "Delete webhook",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/webhooks/{id}/rotate-secret": {
      "post": {
        "tags": [
          "Webhooks"
        ],
        "description": "Rotate webhook signing secret",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/webhooks/{id}/test": {
      "post": {
        "tags": [
          "Webhooks"
        ],
        "description": "Send test webhook delivery",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/webhooks/{id}/deliveries": {
      "get": {
        "tags": [
          "Webhooks"
        ],
        "description": "Get webhook delivery history",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/team": {
      "get": {
        "tags": [
          "Team"
        ],
        "description": "List all team members",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/team/invite": {
      "post": {
        "tags": [
          "Team"
        ],
        "description": "Invite new team member (placeholder - email not yet implemented)",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "display_name",
                  "role"
                ],
                "properties": {
                  "display_name": {
                    "type": "string",
                    "description": "Member display name"
                  },
                  "role": {
                    "type": "string",
                    "enum": [
                      "owner",
                      "admin",
                      "member",
                      "viewer"
                    ],
                    "description": "Member role"
                  }
                }
              }
            }
          },
          "required": true
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/team/{id}": {
      "put": {
        "tags": [
          "Team"
        ],
        "description": "Update team member role and permissions",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "role": {
                    "type": "string",
                    "enum": [
                      "owner",
                      "admin",
                      "member",
                      "viewer"
                    ],
                    "description": "New role"
                  },
                  "permissions": {
                    "type": "object",
                    "description": "Custom permissions object (e.g., {canManageCampaigns: true})"
                  }
                }
              }
            }
          }
        },
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "in": "path",
            "name": "id",
            "required": true,
            "description": "Team member ID"
          }
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      },
      "delete": {
        "tags": [
          "Team"
        ],
        "description": "Remove team member",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/tenant-verticals": {
      "get": {
        "tags": [
          "Tenant Verticals"
        ],
        "description": "Get tenant vertical configuration",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      },
      "post": {
        "tags": [
          "Tenant Verticals"
        ],
        "description": "Create tenant vertical configuration",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "vertical_key",
                  "language_config"
                ],
                "properties": {
                  "vertical_key": {
                    "type": "string",
                    "description": "Vertical identifier (e.g., \"real_estate\", \"automotive\")"
                  },
                  "language_config": {
                    "type": "object",
                    "description": "Language customization config (labels, terminology, etc.)"
                  }
                }
              }
            }
          },
          "required": true
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/tenant-verticals/{id}": {
      "put": {
        "tags": [
          "Tenant Verticals"
        ],
        "description": "Update tenant vertical configuration",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "vertical_key": {
                    "type": "string"
                  },
                  "language_config": {
                    "type": "object"
                  }
                }
              }
            }
          }
        },
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "in": "path",
            "name": "id",
            "required": true,
            "description": "Vertical config ID"
          }
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      },
      "delete": {
        "tags": [
          "Tenant Verticals"
        ],
        "description": "Delete tenant vertical configuration",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/jobs": {
      "get": {
        "tags": [
          "Jobs"
        ],
        "description": "List all background jobs",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/jobs/stats": {
      "get": {
        "tags": [
          "Jobs"
        ],
        "description": "Get job queue statistics",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/jobs/{id}": {
      "get": {
        "tags": [
          "Jobs"
        ],
        "description": "Get job details by ID",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/jobs/{id}/cancel": {
      "post": {
        "tags": [
          "Jobs"
        ],
        "description": "Cancel a pending job",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/jobs/{id}/retry": {
      "post": {
        "tags": [
          "Jobs"
        ],
        "description": "Retry a failed job",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/upload/logo": {
      "post": {
        "tags": [
          "Uploads"
        ],
        "description": "Upload company logo",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/upload/asset": {
      "post": {
        "tags": [
          "Uploads"
        ],
        "description": "Upload marketing asset",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/upload/flyer": {
      "post": {
        "tags": [
          "Uploads"
        ],
        "description": "Upload marketing flyer (PDF)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/upload/{bucket}/{filePath}": {
      "delete": {
        "tags": [
          "Uploads"
        ],
        "description": "Delete uploaded file",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "bucket",
            "required": true
          },
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "filePath",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/locations": {
      "get": {
        "tags": [
          "Locations"
        ],
        "description": "List all locations",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      },
      "post": {
        "tags": [
          "Locations"
        ],
        "description": "Create new location",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name"
                ],
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Location name"
                  },
                  "address": {
                    "type": "string",
                    "description": "Street address"
                  },
                  "city": {
                    "type": "string",
                    "description": "City"
                  },
                  "state": {
                    "type": "string",
                    "description": "State/Province"
                  },
                  "zip": {
                    "type": "string",
                    "description": "ZIP/Postal code"
                  },
                  "neighborhood": {
                    "type": "string",
                    "description": "Neighborhood"
                  },
                  "location_type": {
                    "type": "string",
                    "enum": [
                      "business",
                      "advertisement"
                    ],
                    "description": "Type of location: \"business\" for tenant physical locations, \"advertisement\" for flyer/sign distribution points",
                    "default": "business"
                  },
                  "geo": {
                    "type": "object",
                    "description": "Geographic coordinates (lat/lng)",
                    "properties": {
                      "lat": {
                        "type": "number"
                      },
                      "lng": {
                        "type": "number"
                      }
                    }
                  }
                }
              }
            }
          },
          "required": true
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/locations/{id}": {
      "get": {
        "tags": [
          "Locations"
        ],
        "description": "Get location by ID",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      },
      "put": {
        "tags": [
          "Locations"
        ],
        "description": "Update location",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      },
      "delete": {
        "tags": [
          "Locations"
        ],
        "description": "Delete location",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/contacts": {
      "get": {
        "tags": [
          "Contacts"
        ],
        "description": "List all contacts",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      },
      "post": {
        "tags": [
          "Contacts"
        ],
        "description": "Create new contact",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name"
                ],
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Contact name"
                  },
                  "email": {
                    "type": "string",
                    "format": "email",
                    "description": "Contact email"
                  },
                  "phone": {
                    "type": "string",
                    "description": "Contact phone"
                  },
                  "contact_kind": {
                    "type": "string",
                    "description": "Contact type"
                  },
                  "location_id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Associated location ID"
                  },
                  "tags": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "Contact tags"
                  },
                  "metadata": {
                    "type": "object",
                    "description": "Additional metadata"
                  }
                }
              }
            }
          },
          "required": true
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/contacts/{id}": {
      "get": {
        "tags": [
          "Contacts"
        ],
        "description": "Get contact by ID",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      },
      "put": {
        "tags": [
          "Contacts"
        ],
        "description": "Update contact",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      },
      "delete": {
        "tags": [
          "Contacts"
        ],
        "description": "Delete contact",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/contacts/bulk-import": {
      "post": {
        "tags": [
          "Contacts"
        ],
        "description": "Bulk import contacts",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "contacts"
                ],
                "properties": {
                  "contacts": {
                    "type": "array",
                    "description": "Array of contacts to import",
                    "items": {
                      "type": "object",
                      "required": [
                        "name"
                      ],
                      "properties": {
                        "name": {
                          "type": "string"
                        },
                        "email": {
                          "type": "string",
                          "format": "email"
                        },
                        "phone": {
                          "type": "string"
                        },
                        "contact_kind": {
                          "type": "string"
                        },
                        "location_id": {
                          "type": "string",
                          "format": "uuid"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "required": true
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/interactions": {
      "get": {
        "tags": [
          "Interactions"
        ],
        "description": "List all interactions",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      },
      "post": {
        "tags": [
          "Interactions"
        ],
        "description": "Create new interaction",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "contact_id",
                  "interaction_type",
                  "interaction_date"
                ],
                "properties": {
                  "contact_id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Contact ID"
                  },
                  "location_id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Location ID (optional)"
                  },
                  "interaction_type": {
                    "type": "string",
                    "description": "Type of interaction (e.g., \"meeting\", \"call\", \"email\", \"event\")"
                  },
                  "interaction_date": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Date and time of interaction"
                  },
                  "notes": {
                    "type": "string",
                    "description": "Interaction notes"
                  },
                  "has_follow_up": {
                    "type": "boolean",
                    "description": "Whether follow-up is needed",
                    "default": false
                  },
                  "follow_up_date": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Scheduled follow-up date (if has_follow_up is true)"
                  },
                  "metadata": {
                    "type": "object",
                    "description": "Additional metadata"
                  }
                }
              }
            }
          },
          "required": true
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/interactions/{id}": {
      "get": {
        "tags": [
          "Interactions"
        ],
        "description": "Get interaction by ID",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      },
      "put": {
        "tags": [
          "Interactions"
        ],
        "description": "Update interaction",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "contact_id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Contact ID"
                  },
                  "location_id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Location ID"
                  },
                  "interaction_type": {
                    "type": "string",
                    "description": "Type of interaction"
                  },
                  "interaction_date": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Date and time"
                  },
                  "notes": {
                    "type": "string",
                    "description": "Interaction notes"
                  },
                  "has_follow_up": {
                    "type": "boolean",
                    "description": "Whether follow-up is needed"
                  },
                  "follow_up_date": {
                    "type": "string",
                    "format": "date-time",
                    "description": "Scheduled follow-up date"
                  },
                  "metadata": {
                    "type": "object",
                    "description": "Additional metadata"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      },
      "delete": {
        "tags": [
          "Interactions"
        ],
        "description": "Delete interaction",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/interactions/follow-ups/upcoming": {
      "get": {
        "tags": [
          "Interactions"
        ],
        "description": "List upcoming follow-ups",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/assets/generate": {
      "post": {
        "tags": [
          "Assets"
        ],
        "description": "Generate assets with dynamic text elements and QR code positioning",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "asset_type",
                  "message_theme",
                  "text_elements",
                  "qr_position",
                  "locations",
                  "background_mode",
                  "base_url"
                ],
                "properties": {
                  "asset_type": {
                    "type": "string",
                    "enum": [
                      "flyer",
                      "door_hanger",
                      "table_tent",
                      "business_card",
                      "menu_board"
                    ],
                    "description": "Type of asset to generate"
                  },
                  "message_theme": {
                    "type": "string",
                    "maxLength": 255,
                    "description": "Theme label for this asset (e.g., \"Fall Sale 2024\")"
                  },
                  "text_elements": {
                    "type": "array",
                    "minItems": 1,
                    "description": "Array of text elements with positioning and styling",
                    "items": {
                      "type": "object",
                      "required": [
                        "type",
                        "label",
                        "content",
                        "position",
                        "styling",
                        "display_order"
                      ],
                      "properties": {
                        "type": {
                          "type": "string",
                          "enum": [
                            "headline",
                            "subheadline",
                            "body",
                            "quote",
                            "cta",
                            "custom"
                          ],
                          "description": "Type of text element"
                        },
                        "label": {
                          "type": "string",
                          "description": "Label for this element (e.g., \"Headline\", \"Call to Action\")"
                        },
                        "content": {
                          "type": "string",
                          "description": "Text content to display"
                        },
                        "position": {
                          "type": "object",
                          "required": [
                            "x",
                            "y",
                            "width"
                          ],
                          "properties": {
                            "x": {
                              "type": "number",
                              "description": "X position in pixels from left"
                            },
                            "y": {
                              "type": "number",
                              "description": "Y position in pixels from top"
                            },
                            "width": {
                              "type": "number",
                              "description": "Width in pixels"
                            },
                            "height": {
                              "type": [
                                "number",
                                "null"
                              ],
                              "description": "Height in pixels (null = auto)"
                            }
                          }
                        },
                        "styling": {
                          "type": "object",
                          "required": [
                            "fontSize",
                            "fontWeight",
                            "textAlign",
                            "color"
                          ],
                          "properties": {
                            "fontSize": {
                              "type": "number",
                              "description": "Font size in pixels"
                            },
                            "fontWeight": {
                              "type": "string",
                              "enum": [
                                "normal",
                                "bold"
                              ],
                              "description": "Font weight"
                            },
                            "textAlign": {
                              "type": "string",
                              "enum": [
                                "left",
                                "center",
                                "right",
                                "justify"
                              ],
                              "description": "Text alignment"
                            },
                            "color": {
                              "type": "string",
                              "pattern": "^#[0-9A-Fa-f]{6}$",
                              "description": "Text color (hex format)"
                            },
                            "italic": {
                              "type": "boolean",
                              "description": "Italic style"
                            },
                            "underline": {
                              "type": "boolean",
                              "description": "Underline style"
                            },
                            "letterSpacing": {
                              "type": "number",
                              "description": "Letter spacing in pixels"
                            },
                            "lineSpacing": {
                              "type": "number",
                              "description": "Line spacing in pixels"
                            }
                          }
                        },
                        "display_order": {
                          "type": "number",
                          "description": "Render order (0 = first)"
                        },
                        "constraints": {
                          "type": "object",
                          "properties": {
                            "maxLength": {
                              "type": "number",
                              "description": "Maximum character length"
                            },
                            "required": {
                              "type": "boolean",
                              "description": "Is this element required"
                            }
                          }
                        }
                      }
                    }
                  },
                  "qr_position": {
                    "type": "object",
                    "required": [
                      "x",
                      "y",
                      "size"
                    ],
                    "description": "QR code positioning",
                    "properties": {
                      "x": {
                        "type": "number",
                        "description": "X position in pixels from left"
                      },
                      "y": {
                        "type": "number",
                        "description": "Y position in pixels from top"
                      },
                      "size": {
                        "type": "number",
                        "description": "QR code size (width and height) in pixels"
                      }
                    }
                  },
                  "locations": {
                    "type": "array",
                    "items": {
                      "type": "string",
                      "format": "uuid"
                    },
                    "minItems": 1,
                    "description": "Array of location IDs to generate assets for"
                  },
                  "background_mode": {
                    "type": "string",
                    "enum": [
                      "same",
                      "custom"
                    ],
                    "description": "Use same background for all locations or custom per location"
                  },
                  "background_id": {
                    "type": [
                      "string",
                      "null"
                    ],
                    "format": "uuid",
                    "description": "Background ID (required if mode is \"same\", can be null)"
                  },
                  "location_backgrounds": {
                    "type": "object",
                    "description": "Map of location_id  background_id (required if mode is \"custom\")"
                  },
                  "base_url": {
                    "type": "string",
                    "format": "uri",
                    "description": "Redirect URL for QR code scan"
                  }
                }
              }
            }
          },
          "required": true
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "201": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "assets": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "location_id": {
                            "type": "string"
                          },
                          "asset_type": {
                            "type": "string"
                          },
                          "message_theme": {
                            "type": "string"
                          },
                          "qr_link_id": {
                            "type": "string"
                          },
                          "status": {
                            "type": "string"
                          },
                          "text_elements_count": {
                            "type": "number"
                          }
                        }
                      }
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/internal/assets": {
      "get": {
        "tags": [
          "Assets"
        ],
        "description": "List all assets",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      },
      "post": {
        "tags": [
          "Assets"
        ],
        "description": "Create new asset",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "name",
                  "asset_type"
                ],
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Asset name (e.g., \"Holiday Flyer 2024\")"
                  },
                  "asset_type": {
                    "type": "string",
                    "description": "Asset type (e.g., \"flyer\", \"poster\", \"brochure\", \"digital\")"
                  },
                  "campaign_id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Associated campaign ID (optional)"
                  },
                  "file_url": {
                    "type": "string",
                    "format": "uri",
                    "description": "URL to asset file (e.g., in Supabase Storage or S3)"
                  },
                  "file_size": {
                    "type": "integer",
                    "description": "File size in bytes"
                  },
                  "file_type": {
                    "type": "string",
                    "description": "MIME type (e.g., \"application/pdf\", \"image/png\")"
                  },
                  "metadata": {
                    "type": "object",
                    "description": "Additional metadata (dimensions, colors, etc.)"
                  }
                }
              }
            }
          },
          "required": true
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/assets/{id}": {
      "get": {
        "tags": [
          "Assets"
        ],
        "description": "Get asset by ID",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      },
      "put": {
        "tags": [
          "Assets"
        ],
        "description": "Update asset",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "name": {
                    "type": "string",
                    "description": "Asset name"
                  },
                  "asset_type": {
                    "type": "string",
                    "description": "Asset type"
                  },
                  "campaign_id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Campaign ID"
                  },
                  "file_url": {
                    "type": "string",
                    "format": "uri",
                    "description": "URL to asset file"
                  },
                  "file_size": {
                    "type": "integer",
                    "description": "File size in bytes"
                  },
                  "file_type": {
                    "type": "string",
                    "description": "MIME type"
                  },
                  "metadata": {
                    "type": "object",
                    "description": "Additional metadata"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      },
      "delete": {
        "tags": [
          "Assets"
        ],
        "description": "Delete asset",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/asset-types": {
      "get": {
        "tags": [
          "Asset Types"
        ],
        "description": "List all available asset types with their specifications",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "asset_type": {
                        "type": "string"
                      },
                      "display_name": {
                        "type": "string"
                      },
                      "width": {
                        "type": "integer"
                      },
                      "height": {
                        "type": "integer"
                      },
                      "aspect_ratio": {
                        "type": "string"
                      },
                      "min_font_size": {
                        "type": "integer"
                      },
                      "max_font_size": {
                        "type": "integer"
                      },
                      "min_qr_size": {
                        "type": "integer"
                      },
                      "max_qr_size": {
                        "type": "integer"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/asset-types/{type}": {
      "get": {
        "tags": [
          "Asset Types"
        ],
        "description": "Get specifications for a specific asset type",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "enum": [
                "flyer",
                "door_hanger",
                "table_tent",
                "business_card",
                "menu_board"
              ]
            },
            "in": "path",
            "name": "type",
            "required": true
          }
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "asset_type": {
                      "type": "string"
                    },
                    "display_name": {
                      "type": "string"
                    },
                    "width": {
                      "type": "integer"
                    },
                    "height": {
                      "type": "integer"
                    },
                    "aspect_ratio": {
                      "type": "string"
                    },
                    "min_font_size": {
                      "type": "integer"
                    },
                    "max_font_size": {
                      "type": "integer"
                    },
                    "min_qr_size": {
                      "type": "integer"
                    },
                    "max_qr_size": {
                      "type": "integer"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/internal/gmail/auth-url": {
      "get": {
        "tags": [
          "Gmail"
        ],
        "description": "Get OAuth URL to connect Gmail account",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/gmail/callback": {
      "get": {
        "tags": [
          "Gmail"
        ],
        "description": "OAuth callback from Google (handles redirect)",
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/gmail/status": {
      "get": {
        "tags": [
          "Gmail"
        ],
        "description": "Check Gmail connection status",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/gmail/disconnect": {
      "post": {
        "tags": [
          "Gmail"
        ],
        "description": "Disconnect Gmail account",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/gmail/send": {
      "post": {
        "tags": [
          "Gmail"
        ],
        "description": "Send email via connected Gmail account",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "to",
                  "subject",
                  "body"
                ],
                "properties": {
                  "to": {
                    "type": "string",
                    "format": "email",
                    "description": "Recipient email address"
                  },
                  "cc": {
                    "type": "string",
                    "description": "CC recipients (comma-separated emails)"
                  },
                  "bcc": {
                    "type": "string",
                    "description": "BCC recipients (comma-separated emails)"
                  },
                  "subject": {
                    "type": "string",
                    "description": "Email subject line"
                  },
                  "body": {
                    "type": "string",
                    "description": "Email body in HTML format"
                  },
                  "contactId": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Associated contact ID (optional)"
                  }
                }
              }
            }
          },
          "required": true
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/gmail/draft": {
      "post": {
        "tags": [
          "Gmail"
        ],
        "description": "Create draft in Gmail account",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "to",
                  "subject",
                  "body"
                ],
                "properties": {
                  "to": {
                    "type": "string",
                    "format": "email",
                    "description": "Recipient email address"
                  },
                  "cc": {
                    "type": "string",
                    "description": "CC recipients (comma-separated emails)"
                  },
                  "subject": {
                    "type": "string",
                    "description": "Email subject line"
                  },
                  "body": {
                    "type": "string",
                    "description": "Email body in HTML format"
                  }
                }
              }
            }
          },
          "required": true
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/gmail/sent": {
      "get": {
        "tags": [
          "Gmail"
        ],
        "description": "Get sent email history from Gmail",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/gmail/contacts/{contactId}/sync": {
      "post": {
        "tags": [
          "Gmail Quick Response"
        ],
        "description": "Sync Attra contact to Gmail Contacts",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "contactId",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/gmail/contacts/{contactId}/compose-url": {
      "get": {
        "tags": [
          "Gmail Quick Response"
        ],
        "description": "Get Gmail compose URL with pre-filled template for quick personal response",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "contactId",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/gmail/quick-response/templates": {
      "get": {
        "tags": [
          "Gmail Quick Response"
        ],
        "description": "Get available quick response email templates",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/gmail/quick-response/metrics": {
      "get": {
        "tags": [
          "Gmail Quick Response"
        ],
        "description": "Get response metrics (response rate, avg response time, etc.)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/qr-links": {
      "get": {
        "tags": [
          "QR Links"
        ],
        "description": "List all QR links",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      },
      "post": {
        "tags": [
          "QR Links"
        ],
        "description": "Create new QR link",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "base_url"
                ],
                "properties": {
                  "campaign_id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Associated campaign ID (optional)"
                  },
                  "asset_id": {
                    "type": "string",
                    "format": "uuid",
                    "description": "Associated asset ID (optional)"
                  },
                  "base_url": {
                    "type": "string",
                    "format": "uri",
                    "description": "Destination URL (e.g., \"https://mysite.com/landing\")"
                  },
                  "utm_params": {
                    "type": "object",
                    "description": "UTM tracking parameters (e.g., {\"utm_source\": \"flyer\", \"utm_campaign\": \"fall_2024\"})"
                  },
                  "nickname": {
                    "type": "string",
                    "description": "Friendly name for this QR link (e.g., \"Main Flyer QR\")"
                  }
                }
              }
            }
          },
          "required": true
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/campaigns/{id}/qr-links": {
      "get": {
        "tags": [
          "QR Links"
        ],
        "description": "Get QR links for specific campaign",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/qr-links/{id}": {
      "get": {
        "tags": [
          "QR Links"
        ],
        "description": "Get QR link by ID with scans and analytics",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      },
      "put": {
        "tags": [
          "QR Links"
        ],
        "description": "Update QR link destination URL (allows changing where printed QR codes redirect)",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "base_url": {
                    "type": "string",
                    "format": "uri",
                    "description": "New destination URL"
                  },
                  "utm_params": {
                    "type": "object",
                    "description": "Updated UTM parameters"
                  }
                }
              }
            }
          }
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      },
      "delete": {
        "tags": [
          "QR Links"
        ],
        "description": "Delete QR link",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/qr-links/{id}/analytics": {
      "get": {
        "tags": [
          "QR Links"
        ],
        "description": "Get QR link analytics (scans by day, devices, locations)",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "id",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/ai/generate-copy": {
      "post": {
        "tags": [
          "AI"
        ],
        "description": "Generate marketing copy variations using AI",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "goal",
                  "vertical"
                ],
                "properties": {
                  "goal": {
                    "type": "string",
                    "enum": [
                      "new_clients",
                      "open_house",
                      "brand_awareness",
                      "retention"
                    ],
                    "description": "Campaign goal"
                  },
                  "vertical": {
                    "type": "string",
                    "enum": [
                      "dog_walking",
                      "real_estate",
                      "restaurant",
                      "fitness",
                      "default"
                    ],
                    "description": "Business vertical"
                  },
                  "location_name": {
                    "type": "string",
                    "description": "Name of location (optional)"
                  },
                  "additional_context": {
                    "type": "string",
                    "description": "Additional context for copy generation (optional)"
                  }
                }
              }
            }
          },
          "required": true
        },
        "responses": {
          "200": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "variations": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "headline": {
                            "type": "string"
                          },
                          "subheadline": {
                            "type": "string"
                          }
                        }
                      }
                    },
                    "generatedAt": {
                      "type": "string"
                    },
                    "model": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/internal/ai/rate-limit": {
      "get": {
        "tags": [
          "AI"
        ],
        "description": "Check AI rate limit status",
        "responses": {
          "200": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "remaining": {
                      "type": "number"
                    },
                    "limit": {
                      "type": "number"
                    },
                    "resetAt": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/gmail/quick-response/{contactId}/compose-url": {
      "get": {
        "tags": [
          "Gmail"
        ],
        "description": "Generate Gmail compose URL with pre-filled template",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "in": "query",
            "name": "templateId",
            "required": false,
            "description": "Optional template ID"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "in": "path",
            "name": "contactId",
            "required": true,
            "description": "Contact ID"
          }
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "composeUrl": {
                      "type": "string",
                      "description": "Gmail compose URL"
                    },
                    "template": {
                      "type": [
                        "null",
                        "object"
                      ],
                      "properties": {
                        "id": {
                          "type": "string"
                        },
                        "name": {
                          "type": "string"
                        },
                        "subject": {
                          "type": "string"
                        }
                      }
                    },
                    "preview": {
                      "type": "object",
                      "properties": {
                        "to": {
                          "type": "string"
                        },
                        "subject": {
                          "type": "string"
                        },
                        "body": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/gmail/quick-response/{contactId}/track-opened": {
      "post": {
        "tags": [
          "Gmail"
        ],
        "description": "Track when Gmail compose window opened",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "templateId": {
                    "type": "string",
                    "format": "uuid"
                  }
                }
              }
            }
          }
        },
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "in": "path",
            "name": "contactId",
            "required": true
          }
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "tracked": {
                      "type": "boolean"
                    },
                    "interaction": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/map-data": {
      "get": {
        "tags": [
          "Analytics"
        ],
        "description": "Get pre-aggregated map data for dashboard",
        "parameters": [
          {
            "schema": {
              "type": "number",
              "default": 100
            },
            "in": "query",
            "name": "limit",
            "required": false,
            "description": "Max scans to analyze"
          },
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "in": "query",
            "name": "campaignId",
            "required": false,
            "description": "Filter by campaign"
          }
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "pins": {
                      "type": "array",
                      "description": "Aggregated location pins",
                      "items": {
                        "type": "object",
                        "properties": {
                          "location": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              },
                              "coordinates": {
                                "type": "object",
                                "properties": {
                                  "lat": {
                                    "type": "number"
                                  },
                                  "lng": {
                                    "type": "number"
                                  }
                                }
                              }
                            }
                          },
                          "scanCount": {
                            "type": "number"
                          },
                          "campaigns": {
                            "type": "array",
                            "items": {
                              "type": "string"
                            }
                          }
                        }
                      }
                    },
                    "recentScans": {
                      "type": "array",
                      "description": "Recent scan activity",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "scannedAt": {
                            "type": "string"
                          },
                          "location": {
                            "type": "object",
                            "properties": {
                              "id": {
                                "type": "string"
                              },
                              "name": {
                                "type": "string"
                              }
                            }
                          },
                          "campaign": {
                            "type": "string"
                          }
                        }
                      }
                    },
                    "aggregated": {
                      "type": "boolean"
                    },
                    "generatedAt": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/internal/tenants/{tenantId}/branding/capture": {
      "post": {
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "tenantId",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/branding/capture-onboarding": {
      "post": {
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/tenants/{tenantId}/branding/analyze-premium": {
      "post": {
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "tenantId",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/tenants/{tenantId}/backgrounds/generate": {
      "post": {
        "tags": [
          "Backgrounds"
        ],
        "description": "Generate new campaign background with optional theme-based styling",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "prompt_override": {
                    "type": "string",
                    "description": "Custom prompt override"
                  },
                  "style_keywords": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "description": "Manual style keywords (highest priority)"
                  },
                  "message_theme": {
                    "type": "string",
                    "description": "Message theme name (e.g., \"Summer Menu\", \"Happy Hour\")"
                  },
                  "mood_family": {
                    "type": "string",
                    "description": "Mood family classification for visual style (e.g., \"Cool and Modern\", \"Warm and Local\", \"Bright and Inviting\")"
                  },
                  "generate_count": {
                    "type": "integer",
                    "minimum": 1,
                    "maximum": 5,
                    "default": 1,
                    "description": "Number of backgrounds to generate"
                  }
                }
              }
            }
          }
        },
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "in": "path",
            "name": "tenantId",
            "required": true
          }
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "success": {
                      "type": "boolean"
                    },
                    "job_ids": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "estimated_time_seconds": {
                      "type": "integer"
                    },
                    "keywords_used": {
                      "type": "array",
                      "items": {
                        "type": "string"
                      }
                    },
                    "theme_source": {
                      "type": "string"
                    },
                    "theme_info": {
                      "type": "object",
                      "properties": {
                        "theme_name": {
                          "type": "string"
                        },
                        "matched_from": {
                          "type": "string"
                        },
                        "keywords": {
                          "type": "array",
                          "items": {
                            "type": "string"
                          }
                        },
                        "mood": {
                          "type": "string"
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/internal/tenants/{tenantId}/backgrounds": {
      "get": {
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "tenantId",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/branding/backgrounds/{id}": {
      "get": {
        "tags": [
          "Backgrounds"
        ],
        "description": "Get a single background by ID",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "in": "path",
            "name": "id",
            "required": true,
            "description": "Background ID"
          }
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Background object",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "description": "Background object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "tenant_id": {
                      "type": "string"
                    },
                    "image_url": {
                      "type": "string"
                    },
                    "thumbnail_url": {
                      "type": "string"
                    },
                    "composition_map": {
                      "type": "object"
                    },
                    "flux_prompt": {
                      "type": "string"
                    },
                    "style_keywords": {
                      "type": "array"
                    },
                    "source_type": {
                      "type": "string"
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "mood_family": {
                      "type": "string"
                    },
                    "is_favorite": {
                      "type": "boolean"
                    },
                    "times_used": {
                      "type": "integer"
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "error": {
                      "type": "string"
                    },
                    "message": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/internal/tenants/{tenantId}/backgrounds/usage": {
      "get": {
        "tags": [
          "Backgrounds"
        ],
        "description": "Get background generation usage for current tenant",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "tenantId",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/backgrounds/{backgroundId}/status": {
      "get": {
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "backgroundId",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/backgrounds/{backgroundId}/favorite": {
      "put": {
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "backgroundId",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/backgrounds/{backgroundId}": {
      "delete": {
        "parameters": [
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "backgroundId",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/tenants/{tenantId}/theme-vocabulary": {
      "get": {
        "tags": [
          "Theme Vocabulary"
        ],
        "description": "Get all message theme definitions for tenant",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "in": "path",
            "name": "tenantId",
            "required": true
          }
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "themes": {
                      "type": "array",
                      "items": {
                        "type": "object",
                        "properties": {
                          "id": {
                            "type": "string"
                          },
                          "theme_name": {
                            "type": "string"
                          },
                          "keywords": {
                            "type": "array",
                            "items": {
                              "type": "string"
                            }
                          },
                          "mood": {
                            "type": "string"
                          },
                          "created_at": {
                            "type": "string"
                          },
                          "updated_at": {
                            "type": "string"
                          }
                        }
                      }
                    },
                    "count": {
                      "type": "integer"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/internal/tenants/{tenantId}/theme-vocabulary/{themeName}": {
      "put": {
        "tags": [
          "Theme Vocabulary"
        ],
        "description": "Save or update theme definition",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "keywords"
                ],
                "properties": {
                  "keywords": {
                    "type": "array",
                    "items": {
                      "type": "string"
                    },
                    "minItems": 1,
                    "maxItems": 5
                  },
                  "mood": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "required": true
        },
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "in": "path",
            "name": "tenantId",
            "required": true
          },
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "themeName",
            "required": true
          }
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "theme": {
                      "type": "object"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "delete": {
        "tags": [
          "Theme Vocabulary"
        ],
        "description": "Delete theme definition",
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "in": "path",
            "name": "tenantId",
            "required": true
          },
          {
            "schema": {
              "type": "string"
            },
            "in": "path",
            "name": "themeName",
            "required": true
          }
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/tenants/{tenantId}/theme-vocabulary/seed": {
      "post": {
        "tags": [
          "Theme Vocabulary"
        ],
        "description": "Seed tenant with default theme vocabulary",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "properties": {
                  "industry": {
                    "type": "string",
                    "enum": [
                      "restaurant",
                      "retail",
                      "service",
                      "healthcare"
                    ]
                  }
                }
              }
            }
          }
        },
        "parameters": [
          {
            "schema": {
              "type": "string",
              "format": "uuid"
            },
            "in": "path",
            "name": "tenantId",
            "required": true
          }
        ],
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "themes": {
                      "type": "array"
                    },
                    "count": {
                      "type": "integer"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/internal/preferences": {
      "get": {
        "tags": [
          "Preferences"
        ],
        "description": "Get tenant preferences",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "tenant_id": {
                      "type": "string"
                    },
                    "onboarding_goal": {
                      "type": [
                        "null",
                        "string"
                      ]
                    },
                    "onboarding_vertical": {
                      "type": [
                        "null",
                        "string"
                      ]
                    },
                    "onboarding_completed_at": {
                      "type": [
                        "null",
                        "string"
                      ]
                    },
                    "first_campaign_created": {
                      "type": "boolean"
                    },
                    "first_campaign_id": {
                      "type": [
                        "null",
                        "string"
                      ]
                    },
                    "checklist_completed": {
                      "type": "boolean"
                    },
                    "goal_metadata": {
                      "type": "object"
                    },
                    "created_at": {
                      "type": "string"
                    },
                    "updated_at": {
                      "type": "string"
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/api/internal/preferences/onboarding-goal": {
      "post": {
        "tags": [
          "Preferences"
        ],
        "description": "Save onboarding goal",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "goal",
                  "vertical"
                ],
                "properties": {
                  "goal": {
                    "type": "string"
                  },
                  "vertical": {
                    "type": "string"
                  },
                  "metadata": {
                    "type": "object"
                  }
                }
              }
            }
          },
          "required": true
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/preferences/first-campaign": {
      "post": {
        "tags": [
          "Preferences"
        ],
        "description": "Mark first campaign as created",
        "requestBody": {
          "content": {
            "application/json": {
              "schema": {
                "type": "object",
                "required": [
                  "campaignId"
                ],
                "properties": {
                  "campaignId": {
                    "type": "string"
                  }
                }
              }
            }
          },
          "required": true
        },
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/internal/preferences/checklist-complete": {
      "post": {
        "tags": [
          "Preferences"
        ],
        "description": "Mark onboarding checklist as complete",
        "security": [
          {
            "bearerAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    },
    "/api/v1/tenants": {
      "get": {
        "tags": [
          "Public API"
        ],
        "description": "List tenants (public API)",
        "security": [
          {
            "apiKeyAuth": []
          }
        ],
        "responses": {
          "200": {
            "description": "Default Response"
          }
        }
      }
    }
  },
  "servers": [
    {
      "url": "http://localhost:8080",
      "description": "Development server"
    },
    {
      "url": "https://api.attra.io",
      "description": "Production server"
    }
  ],
  "tags": [
    {
      "name": "internal",
      "description": "Internal API endpoints (JWT auth)"
    },
    {
      "name": "public",
      "description": "Public API endpoints (API key auth)"
    },
    {
      "name": "realtime",
      "description": "Realtime and analytics endpoints"
    }
  ]
}